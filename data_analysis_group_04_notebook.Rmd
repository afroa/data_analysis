---
title: "data_analysis_group_04_notebook"
output: html_document
date: '2022-04-15'
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## R Markdown

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:

Deliverable 2 (week 11) - 10 percent: 
Turn in, via GitHub, an updated draft data notebook (.RMD) that :
Loads and cleans the core data set to prepare for analysis. 
Shows basic exploratory analysis to demonstrate an understanding of the dataset, including the number of rows and columns, any obvious limitations or flaws and any reasons why it might not be able to answer the questions you've posed last week.

Here are the things we set out to do in cleaning this data:
- Clean county names to match census 
- Get rid of date created column
- Try to get rid of MOE row

We first tried to clean the data in R. We were successful in filtering by income to remove the MOE data that we did not need. We wanted to flip the rows and columns of the original dataframe so it would be easier to map onto census data later on. But we ran into *significant* hurdles trying to flip them. When we used the t() function -- which we Googled -- it saved it as a matrix instead of a dataframe. When we changed it to a dataframe, it looked like the data was consistent but when we tried to export it to Open Refine to continue cleaning it got very messy (it got rid of all of the county names each time). After two hours, we decided to clean up this data manually in excel. The small scale of the data allowed us to do this because there were so few rows and columns, but in the future we know this is not a sustainable way of cleaning data. (Do you know what caused this to happen? Or ways that we could've gone about this differently?) In excel, we standardized the county names to align with the census data, we transposed the rows and columns and added a "name" column that we can use in future analysis and got rid of excess rows, such as the MOE and "income" rows, and date created column. 

There are 11 columns and 25 rows in our cleaned data set, one row for each Maryland jurisdiction. This data is limited because it only has median income, so we will have to join it to other demographic and census data. We will be using the census data on home ownership. At this point, we do not have any housing data included in our analysis data, so for our next milestone we will work on joining datasets with the one we just cleaned. 

*We have left our effort to clean in R below, but ended up cleaning the data outside of R using excel. We wanted to leave it to show we tried, and so you could see where we went wrong/give any tips for the future. :D *

```{r}

library(tidycensus)
library(tidyverse)
library(janitor)
library(dplyr)

#Reading the data into a new dataframe

md_median_household_income <- read.csv("data/md_median_household_income.csv")

# Cleaning the data

clean_rows <- md_median_household_income %>%
  filter(Data == "Income") %>%
  clean_names() %>%
  t() 

flipped_rows <- as.data.frame(clean_rows)
  
flipped_rows %>%
  rename(flipped_rows, V1 = "2010")

#  mutate(COUNTY = toupper(str_remove_all(COUNTY,", West Virginia|County"))) %>%
#  mutate(COUNTY = str_trim(COUNTY,side="both"))

```

```{r}

median_hh_income_cleaned_data <- read_csv("data/final_final.csv")

```

***Question 1***

# 1. What percentage of people in Prince George's County rent their homes? What percentage own their homes?

The percentage of people in Prince George's County that rent their homes is roughly 36.8%. The percentage that own their homes is roughly 63.2. One question that we have about these statistics is of those PG County homeowners, how many buy homes to place on the rental-market, and how many buy homes to live in themselves? In the future, we hope to use these percentages to understand why it is cheaper to own a home in PG County than it is to rent, which was a finding from many of the articles on PG County housing that we researched before starting our data exploration for this project. 

# 2. How does Prince George's County compare to other counties for both renters and home owners?

When compared to every other county in the state of Maryland, Prince George's County has the third lowest rate of home ownership. The county also has the third highest rate of renter occupied domiciles. Based on these statistics, we wonder what demographics rent in Prince George's County and what demographics buy in Prince George's County? In the future, we would like to explore racial and socioeconomic demographics and see if these relate at all to home ownership/rental rates. 

```{r echo=TRUE}
acs2019 <- load_variables(2019, "acs5",cache = TRUE)

owner_occupied_md <- get_acs(
  geography = "county",
  variables = c(owneroccupied = "B25008_002"),
  state = "MD",
  year = 2019
)

renter_occupied_md <- get_acs(
  geography = "county",
  variables = c(renter_occupied = "B25008_003"),
  state = "MD",
  year = 2019
)

all_housing_md <- get_acs(
  geography = "county",
  variables = c(total_housing = "B25008_001"),
  state = "MD",
  year = 2019
)

all_combined_housing <- all_housing_md %>% inner_join(renter_occupied_md, by=c("GEOID", "NAME")) %>%
  rename(total_housing_2019=estimate.x, total_renter_2019=estimate.y) %>%
  select(NAME, total_housing_2019, total_renter_2019)

final_combined_housing <- all_combined_housing %>% inner_join(owner_occupied_md, by=c("NAME")) %>%
  rename(total_owner_2019=estimate) %>%
  select(NAME, total_housing_2019, total_renter_2019, total_owner_2019) %>%
  mutate(percent_renter_2019 = (total_renter_2019/total_housing_2019)*100) %>%
  mutate(percent_owner_2019 = (total_owner_2019/total_housing_2019)*100)

final_combined_housing %>%
  arrange(desc(percent_owner_2019))

final_combined_housing %>%
  arrange(desc(percent_renter_2019))

```

# 3. How does Prince George's County's percentage of home ownership and renters in 2019 compare to the county's percentages in 2010?

Since the 2010 census, PG County saw a 17.8% increase in renting, and a 1.2% increase in home ownership. There was a roughly 6.7% increase in housing. We are wondering what qualifies for "housing" in terms of the census definition. Of that across-the-board increase, was there an increase in availability of Affordable Housing in the last 10 years? We would be interested in looking at whether housing subsidy programs that the county has implemented has contributed to the increase in renters. We would also like to determine how median home prices changed over the last 10 years in Prince George's County? How did the median rent change over the last 10 years? How have these changes affected migration patterns in the state given that towns that were once hot spots because of cheaper rent/home prices have become gentrified and more expensive to live in, pushing lower income out? Based on this, we also wonder whether any major employers have arrived or left Prince George's County as their population fluctuates due to their migration. With the data we have so far, can we project how the COVID pandemic has affected renting and home ownership in the state and what would the projections/conclusions be?

```{r echo=TRUE}

acs2010 <- load_variables(2010, "acs5",cache = TRUE)

owner_occupied_md_2010 <- get_acs(
  geography = "county",
  variables = c(owneroccupied = "B25008_002"),
  state = "MD",
  year = 2010
)

renter_occupied_md_2010 <- get_acs(
  geography = "county",
  variables = c(renter_occupied = "B25008_003"),
  state = "MD",
  year = 2010
)

all_housing_md_2010 <- get_acs(
  geography = "county",
  variables = c(total_housing = "B25008_001"),
  state = "MD",
  year = 2010
)

decade_housing <- final_combined_housing %>% inner_join(renter_occupied_md_2010, by=c("NAME")) %>%
  rename(total_renter_2010=estimate)

combined_owners <- decade_housing %>% inner_join(owner_occupied_md_2010, by=c("NAME")) %>%
  rename(total_owner_2010=estimate)

decade_total_housing_combined <- combined_owners %>% inner_join(all_housing_md_2010, by=c("NAME")) %>%
  rename(total_housing_2010=estimate) %>%
  select(NAME, total_housing_2010, total_renter_2010, total_owner_2010, total_housing_2019, total_renter_2019, total_owner_2019) 

decade_pg_housing <- decade_total_housing_combined %>%
  filter(NAME == "Prince George's County, Maryland") %>%
  mutate(percent_change_owner = ((total_owner_2019/total_owner_2010)-1)*100) %>%
  mutate(percent_change_renter = ((total_renter_2019/total_renter_2010)-1)*100) %>%
  mutate(percent_change_housing = ((total_housing_2019/total_housing_2010)-1)*100)

```

# 4. Merging demographic data with the housing dataframe

```{r echo=TRUE}

acs2010 <- load_variables(2019, "acs5",cache = TRUE) %>%
  filter(name >= "B02001_002", name <= "B02001_010")

white_data <- get_acs(
  geography = "county",
  variables = c(race = "B02001_002"),
  state = "MD",
  year = 2019
)

black_data <- get_acs(
  geography = "county",
  variables = c(race = "B02001_003"),
  state = "MD",
  year = 2019
)

native_data <- get_acs(
  geography = "county",
  variables = c(race = "B02001_004"),
  state = "MD",
  year = 2019
)

asian_data <- get_acs(
  geography = "county",
  variables = c(race = "B02001_005"),
  state = "MD",
  year = 2019
)

pacific_islander_data <- get_acs(
  geography = "county",
  variables = c(race = "B02001_006"),
  state = "MD",
  year = 2019
)

one_other_race <- get_acs(
  geography = "county",
  variables = c(race = "B02001_007"),
  state = "MD",
  year = 2019
)

two_or_more_races <- get_acs(
  geography = "county",
  variables = c(race = "B02001_008"),
  state = "MD",
  year = 2019
)

two_races_including_some_other_race <- get_acs(
  geography = "county",
  variables = c(race = "B02001_009"),
  state = "MD",
  year = 2019
)

two_races_exluding_or_three_races <- get_acs(
  geography = "county",
  variables = c(race = "B02001_010"),
  state = "MD",
  year = 2019
)

combined_race_1 <- white_data %>%
  inner_join(black_data, by=c("GEOID", "NAME")) %>%
  rename(black_population=estimate.y, white_population=estimate.x) %>%
  select(GEOID, NAME, black_population, white_population)

combined_race_2 <- combined_race_1 %>%
  inner_join(native_data, by=c("GEOID", "NAME")) %>%
  rename(native_population=estimate) 

combined_race_3 <- combined_race_2 %>%
  inner_join(asian_data, by=c("GEOID", "NAME")) %>%
  rename(asian_population=estimate)

combined_race_4 <- combined_race_3 %>%
  inner_join(pacific_islander_data, by=c("GEOID", "NAME")) %>%
  rename(pacific_island_population=estimate)

combined_race_5 <- combined_race_4 %>%
  inner_join(one_other_race, by=c("GEOID", "NAME")) %>%
  rename(one_other_race=estimate)

combined_race_6 <- combined_race_5 %>%
  inner_join(two_or_more_races, by=c("GEOID", "NAME")) %>%
  rename(two_or_more_races=estimate)

combined_race_7 <- combined_race_6 %>%
  inner_join(two_races_including_some_other_race, by=c("GEOID", "NAME")) %>%
  rename(two_races_including_some_other_race=estimate)

final_racial_demographics <- combined_race_7 %>%
  inner_join(two_races_exluding_or_three_races, by=c("GEOID", "NAME")) %>%
  rename(two_races_exluding_or_three_races=estimate) %>%
  select(GEOID, NAME, black_population, white_population, native_population, asian_population, pacific_island_population, one_other_race, two_or_more_races, two_races_including_some_other_race)

combined_race_and_housing <- final_racial_demographics %>%
  inner_join(final_combined_housing, by=c("NAME"))

prince_georges_race <- combined_race_and_housing %>%
  filter(NAME == "Prince George's County, Maryland")

prince_georges_race_and_housing <- decade_pg_housing %>%
  inner_join(prince_georges_race, by=c("NAME")) %>%
  select(GEOID, NAME, black_population, white_population, native_population, asian_population, pacific_island_population, one_other_race, two_or_more_races, two_races_including_some_other_race, total_housing_2019.y, total_renter_2019.y, total_owner_2019.y, percent_change_owner, percent_change_renter, percent_change_housing)

white_data_homeownership <- get_acs(
  geography = "county",
  variables = c(race = "B25003A_002"),
  state = "MD",
  year = 2019)

black_data_homeownership <- get_acs(
  geography = "county",
  variables = c(race = "B25003B_002"),
  state = "MD",
  year = 2019)

americanindian_alaskannative_data_homeownership <- get_acs(
  geography = "county",
  variables = c(race = "B25003C_002"),
  state = "MD",
  year = 2019)

asian_data_homeownership <- get_acs(
  geography = "county",
  variables = c(race = "B25003D_002"),
  state = "MD",
  year = 2019)

nativehawaiian_aapi_data_homeownership <- get_acs(
  geography = "county",
  variables = c(race = "B25003E_002"),
  state = "MD",
  year = 2019)

someohterracealone_data_homeownership <- get_acs(
  geography = "county",
  variables = c(race = "B25003F_002"),
  state = "MD",
  year = 2019)

twootherraces_data_homeownership <- get_acs(
  geography = "county",
  variables = c(race = "B25003G_002"),
  state = "MD",
  year = 2019)

whitealonenothispanicorlatino_data_homeownership <- get_acs(
  geography = "county",
  variables = c(race = "B25003H_002"),
  state = "MD",
  year = 2019)

hispanicorlatino_data_homeownership <- get_acs(
  geography = "county",
  variables = c(race = "B25003I_002"),
  state = "MD",
  year = 2019)


```


```{r}

##Owner combined
owner_combined_race_1 <- white_data_homeownership %>%
  inner_join(black_data_homeownership, by=c("GEOID", "NAME")) %>%
  rename(owner_black_population=estimate.y, owner_white_population=estimate.x) %>%
  select(GEOID, NAME, owner_black_population, owner_white_population)

owner_combined_race_2 <- owner_combined_race_1 %>%
  inner_join(americanindian_alaskannative_data_homeownership, by=c("GEOID", "NAME")) %>%
  rename(owner_native_population=estimate) 

owner_combined_race_3 <- owner_combined_race_2 %>%
  inner_join(asian_data_homeownership, by=c("GEOID", "NAME")) %>%
  rename(owner_asian_population=estimate)

owner_combined_race_4 <- owner_combined_race_3 %>%
  inner_join(nativehawaiian_aapi_data_homeownership, by=c("GEOID", "NAME")) %>%
  rename(owner_pacific_island_population=estimate)

owner_combined_race_5 <- owner_combined_race_4 %>%
  inner_join(someohterracealone_data_homeownership, by=c("GEOID", "NAME")) %>%
  rename(owner_some_other_race=estimate)

owner_combined_race_6 <- owner_combined_race_5 %>%
  inner_join(twootherraces_data_homeownership, by=c("GEOID", "NAME")) %>%
  rename(owner_two_or_more_races=estimate)

owner_combined_race_7 <- owner_combined_race_6 %>%
  inner_join(whitealonenothispanicorlatino_data_homeownership, by=c("GEOID", "NAME")) %>%
  rename(owner_whitealonenothispanicorlatino_data_homeownership=estimate)

owner_combined_race_8 <- owner_combined_race_7 %>%
  inner_join(hispanicorlatino_data_homeownership, by=c("GEOID", "NAME")) %>%
  rename(hispanicorlatino_data_homeownership=estimate)
```

```{r}

##Home renters by race

white_data_rentership <- get_acs(
  geography = "county",
  variables = c(race = "B25003A_003"),
  state = "MD",
  year = 2019)

black_data_rentership <- get_acs(
  geography = "county",
  variables = c(race = "B25003B_003"),
  state = "MD",
  year = 2019)

americanindian_alaskannative_data_rentership <- get_acs(
  geography = "county",
  variables = c(race = "B25003C_003"),
  state = "MD",
  year = 2019)

asian_data_rentership <- get_acs(
  geography = "county",
  variables = c(race = "B25003D_003"),
  state = "MD",
  year = 2019)

nativehawaiian_aapi_data_rentership <- get_acs(
  geography = "county",
  variables = c(race = "B25003E_003"),
  state = "MD",
  year = 2019)

someohterracealone_data_rentership <- get_acs(
  geography = "county",
  variables = c(race = "B25003F_003"),
  state = "MD",
  year = 2019)

twootherraces_data_rentership <- get_acs(
  geography = "county",
  variables = c(race = "B25003G_003"),
  state = "MD",
  year = 2019)

whitealonenothispanicorlatino_data_rentership <- get_acs(
  geography = "county",
  variables = c(race = "B25003H_003"),
  state = "MD",
  year = 2019)

hispanicorlatino_data_rentership <- get_acs(
  geography = "county",
  variables = c(race = "B25003I_003"),
  state = "MD",
  year = 2019)

```

```{r}

#Combined ownership and race
final_owner_race_demographics <- owner_combined_race_8 %>%
  select(GEOID, NAME, owner_black_population, owner_white_population, owner_native_population, owner_asian_population, owner_pacific_island_population, owner_some_other_race, owner_two_or_more_races, owner_whitealonenothispanicorlatino_data_homeownership,hispanicorlatino_data_homeownership)

```


```{r}

renter_combined_race_1 <- white_data_rentership %>%
  inner_join(black_data_rentership, by=c("GEOID", "NAME")) %>%
  rename(renter_black_population=estimate.y, renter_white_population=estimate.x) %>%
  select(GEOID, NAME, renter_black_population, renter_white_population)

renter_combined_race_2 <- renter_combined_race_1 %>%
  inner_join(americanindian_alaskannative_data_rentership, by=c("GEOID", "NAME")) %>%
  rename(renter_native_population=estimate) 

renter_combined_race_3 <- renter_combined_race_2 %>%
  inner_join(asian_data_rentership, by=c("GEOID", "NAME")) %>%
  rename(renter_asian_population=estimate)

renter_combined_race_4 <- renter_combined_race_3 %>%
  inner_join(nativehawaiian_aapi_data_rentership, by=c("GEOID", "NAME")) %>%
  rename(renter_pacific_island_population=estimate)

renter_combined_race_5 <- renter_combined_race_4 %>%
  inner_join(someohterracealone_data_rentership, by=c("GEOID", "NAME")) %>%
  rename(renter_some_other_race=estimate)

renter_combined_race_6 <- renter_combined_race_5 %>%
  inner_join(twootherraces_data_rentership, by=c("GEOID", "NAME")) %>%
  rename(renter_two_or_more_races=estimate)

renter_combined_race_7 <- renter_combined_race_6 %>%
  inner_join(hispanicorlatino_data_rentership, by=c("GEOID", "NAME")) %>%
  rename(renter_hispanicorlatino_data=estimate)

renter_combined_race_8 <- renter_combined_race_7 %>%
  inner_join(whitealonenothispanicorlatino_data_rentership, by=c("GEOID", "NAME")) %>%
  rename(white_alone_rentership=estimate)

```

```{r}
#Combined ownership and race

final_renter_race_demographics <- renter_combined_race_8 %>%
  select(GEOID, NAME, renter_black_population, renter_white_population, renter_native_population, renter_asian_population, renter_pacific_island_population, renter_some_other_race, renter_two_or_more_races, renter_hispanicorlatino_data,renter_hispanicorlatino_data)

```

```{r}


renter_owner_race_combined <- final_renter_race_demographics %>%
  inner_join(final_owner_race_demographics, by=c("GEOID", "NAME"))
everything_combined <- combined_race_and_housing %>%
  inner_join(renter_owner_race_combined, by=c("GEOID", "NAME")) 


```


# 3. Do white or Black demographic groups own their homes more? Which group rents their homes more? Does this fall in line with what we expect?

**We expect white populations to own the most and Black populations to rent the most**

According to the 2020 census, white people own a greater share of homes across Maryland than Black people preportional to each group's total population in the state. This falls in line with the expectation we had, but the difference is a bit smaller than our initial hypothesis. Black populations also have relatively similar percentages of home ownership and home rentership, with rentership percentage at about 17.5% and ownership at about 18.5%. We have a lot of questions on why these two rates for Black home ownership and Black rentership are so similar in terms of percentages. To understand if this is a common occurrence for minority groups, we would like to compare the home ownership and rentership among minority groups in subsequent questions to see if percentage of people who own vs. rent is similar for many other groups, other than the state's white population. 

We expected this to be more unbalanced, similar to what we can see with the data on white people renting vs. buying their homes. Roughly 29% of white Marylanders own their homes, compared to the 9.5% that rent their homes. Relative to their populations in the state, white people own their own homes at a rate of 11% more than Black people. We realize that there are several ways in which the census classifies white homeowners and renters (i.e. “white alone not hispanic or latino”), but the census population data itself does not divide white populations vs. white and not hispanic or latino the same way, so we used the total white population for these calculations, but acknowledge that a fair proportion of these home owners/renters may have been grouped into the white category from a hispanic or latino category. 

We really don't know why there is such a discrepancy between Black and white homeownership. Our guess is that this has something to do with housing availability in the state. We are hoping that in answering our next question that we will learn more about housing breakdown in the state by demographics and paint a more clear picture of how different populations have more or less access to affordable homes and rental properties. 


```{r}

# Finding Black renters

everything_combined %>%
  summarise(
    md_renters_black_state = sum(renter_black_population),
    md_black_pop = sum(black_population)) %>%
  mutate(percent_black_renters = (md_renters_black_state/md_black_pop)*100)

# Finding Black home owners

everything_combined %>%
  summarise(
    md_owners_black_state = sum(owner_black_population),
    md_black_pop = sum(black_population)) %>%
  mutate(percent_black_owners = (md_owners_black_state/md_black_pop)*100)

# Finding white renters

everything_combined %>%
  summarise(
    md_renters_white_state = sum(renter_white_population),
    md_white_pop = sum(white_population)) %>%
  mutate(percent_white_renters = (md_renters_white_state/md_white_pop)*100)

# Finding white homeowners

everything_combined %>%
  summarise(
    md_owners_white_state = sum(owner_white_population),
    md_white_pop = sum(white_population)) %>%
  mutate(percent_white_owners = (md_owners_white_state/md_white_pop)*100)


```

# 5. What race in Maryland owns the largest share of the housing market preportional to their population? Which owns the largest share of the renting market?

White populations overwhelmingly have the highest rate of home ownership relative to their population in the state, followed closely by Asian and Native populations, who have high home ownership rates but obviously smaller populations in the state. The demographic in the state with the highest percentage of home rentership is Native Americans. This makes us wonder about how the state treats reservation property for Native Americans in Maryland and if this affects their rate of home ownership and rentership. Overall, when comparing the ratio of owners to renters across populations, data shows that Asians and Native Americans are the most likely to own a home. It also shows that Native Americans are the most likely to rent. However, data for Native Americans is unreliable because the Census Bureau revealed in 2020 that it had vastly undercounted Native Americans by 4.9%, the most of any undercounted group. Additionally, because significant numbers of Native Americans live on reservations, obtaining close-to-succinct statistics on their home ownership and rental statuses can be challenging.

We excluded the “some other race alone,” "two other races,” “white alone, not Hispanic or Latino” categories because they are too broad to draw conclusions from for this course of inquiry. They would need more specificity for us to consider them e.g. “two other races” could be broken down to “black and white” or “black and asian” etc. It would be difficult to pair these measures of census populations with the categories in the Census for housing demographic breakdowns because they do not line up perfectly like the other categories displaying one demographic. 

We were surprised by the Hispanic ownership and rentership rates, but believe it is due to the fact that many people who self-report as Hispanic also report as white, or as members of another race. One question we have about this data is how the Census will change how it displays demographic data related to home ownership and rentership as attitudes around the country change. Researchers say that a rise in interracial marriages will increase the number of people who identify with one or more races by 2050. So, we wonder how the census will change to capture these identities more accurately, especially when it pertains to home ownership rates for multi-racial families. 

# We acknowledge the discrepancies in the total ownership and rentership numbers, and will be exploring this further by comparing those stats to a different ACS variable of total population of people in each demographic category over the age of 18, to see how the numbers change. This would make sense that the numbers may be different because people under 18 cannot own or rent homes. The ACS variable we select will reflect populations 18 years and older.

```{r}

# Finding Asian renters

asian_renters <- everything_combined %>%
  summarise(
    md_renters_asian_state = sum(renter_asian_population),
    md_asian_pop = sum(asian_population)) %>%
  mutate(percent_asian_renters = (md_renters_asian_state/md_asian_pop)*100) %>%

# Finding Asian home owners

asian_owners <- everything_combined %>%
  summarise(
    md_owners_asian_state = sum(owner_asian_population),
    md_asian_pop = sum(asian_population)) %>%
  mutate(percent_asian_owners = (md_owners_asian_state/md_asian_pop)*100)

# Finding Native renters

native_renters <- everything_combined %>%
  summarise(
    md_renters_native_state = sum(renter_native_population),
    md_native_pop = sum(native_population)) %>%
  mutate(percent_native_renters = (md_renters_native_state/md_native_pop)*100)

# Finding Native homeowners

native_owners <- everything_combined %>%
  summarise(
    md_owners_native_state = sum(owner_native_population),
    md_native_pop = sum(native_population)) %>%
  mutate(percent_native_owners = (md_owners_native_state/md_native_pop)*100)

# Finding Pacific Island renters

pacific_renters <- everything_combined %>%
  summarise(
    md_renters_pacific_state = sum(renter_pacific_island_population),
    md_pacific_pop = sum(pacific_island_population)) %>%
  mutate(percent_pacific_renters = (md_renters_pacific_state/md_pacific_pop)*100)

# Finding Pacific Island homeowners 

pacific_owners <- everything_combined %>%
  summarise(
    md_owner_pacific_state = sum(owner_pacific_island_population),
    md_pacific_pop = sum(pacific_island_population)) %>%
  mutate(percent_pacific_renters = (md_owner_pacific_state/md_pacific_pop)*100)

# Finding Hispanic renters

everything_combined %>%
  summarise(
    md_renters_hispanic_state = sum(renter_hispanicorlatino_data),
    md_white_pop = sum(white_population)) %>%
  mutate(percent_hispanic_renters = (md_renters_hispanic_state/md_white_pop)*100)

# Finding Hispanic homeowners

everything_combined %>%
  summarise(
    md_owners_hispanic_state = sum(hispanicorlatino_data_homeownership),
    md_white_pop = sum(white_population)) %>%
  mutate(percent_hispanic_owners = (md_owners_hispanic_state/md_white_pop)*100)


# Showing like this because we have made joining these dataframes too difficult because they don't contain a name column, but we can fix in future if needed. 

# Black renters = 17.48%
# Black owners = 18.55%

# White r = 9.56%
# White o = 29.88%

# Asian r = 9.66%
# Asian o = 22.54%

# Native r = 17.65%
# Native o = 22.38%

# Pacific r = 13.18%
# Pacific o =  18.49%

# Hispanic r = 2.19%
# Hispanic o = 2.19%


```

# B09001_002 <- subtract from total population number

```{r}


pop_under_18_county <- get_acs(
  geography = "county",
  variables = c(owneroccupied = "B09001_002"),
  state = "MD",
  year = 2019
) %>%
  select(NAME, variable, estimate)

white_kids <- get_acs(
  geography = "county",
  variables = c(white_male_under_5 = "B01001A_003", white_male_5_to_9 = "B01001A_004", white_male_10_to_14 = "B01001A_005", white_male_15_to_17 = "B01001A_006", white_female_under_5 = "B01001A_018", white_female_5_to_9 = "B01001A_019", white_female_10_to_14 = "B01001A_020", white_female_15_to_17 = "B01001A_021"), 
  state = "MD",
  year = 2019
) %>%
  select(NAME, variable, estimate)

white_kids_clean <- white_kids %>%
  group_by(NAME) %>%
  summarise(
    total_kids = sum(estimate)
  )

white_kids_clean %>%
  summarise(
    total_kids_state = sum(total_kids)
  )

black_kids <- get_acs(
  geography = "county",
  variables = c(black_male_under_5 = "B01001B_003", black_male_5_to_9 = "B01001B_004", black_male_10_to_14 = "B01001B_005", black_male_15_to_17 = "B01001B_006", black_female_under_5 = "B01001B_018", black_female_5_to_9 = "B01001B_019", black_female_10_to_14 = "B01001B_020", black_female_15_to_17 = "B01001B_021"), 
  state = "MD",
  year = 2019
) %>%
  select(NAME, variable, estimate)

black_kids_clean <- black_kids %>%
  group_by(NAME) %>%
  summarise(
    total_kids = sum(estimate)
  )

black_kids_clean %>%
  summarise(
    total_kids_state = sum(total_kids)
  )

native_kids <- get_acs(
  geography = "county",
  variables = c(native_alaskan_male_under_5 = "B01001C_003", native_alaskan_male_5_to_9 = "B01001C_004", native_alaskan_male_10_to_14 = "B01001C_005", native_alaskan_male_15_to_17 = "B01001C_006",
native_alaskan_female_under_5 = "B01001C_018", native_alaskan_female_5_to_9 = "B01001C_019", native_alaskan_female_10_to_14 = "B01001C_020", native_alaskan_female_15_to_17 = "B01001C_021"), 
  state = "MD",
  year = 2019
) %>%
  select(NAME, variable, estimate)

native_kids_clean <- native_kids %>%
  group_by(NAME) %>%
  summarise(
    total_kids = sum(estimate)
  )

native_kids_clean %>%
  summarise(
    total_kids_state = sum(total_kids)
  )

hispanic_kids <- get_acs(
  geography = "county",
  variables = c(hispanic_male_under_5 = "B01001I_003", hispanic_male_5_to_9 = "B01001I_004", hispanic_male_10_to_14 = "B01001I_005", hispanic_male_14_to_17 = "B01001I_006", hispanic_female_under_5 = "B01001I_018", hispanic_female_5_to_9 = "B01001I_019", hispanic_female_10_to_14 = "B01001I_020", hispanic_female_15_to_17 = "B01001I_021"), 
  state = "MD",
  year = 2019
) %>%
  select(NAME, variable, estimate)

hispanic_kids_clean <- hispanic_kids %>%
  group_by(NAME) %>%
  summarise(
    total_kids = sum(estimate)
  )

hispanic_kids_clean %>%
  summarise(
    total_kids_state = sum(total_kids)
  )

asian_kids <- get_acs(
  geography = "county",
  variables = c(asian_male_under_5 = "B01001D_003", asian_male_5_to_9 = "B01001D_004", asian_male_10_to_14 = "B01001D_005", asian_male_14_to_17 = "B01001D_006",
asian_female_under_5 = "B01001D_018", asian_female_5_to_9 = "B01001D_019", asian_female_10_to_14 = "B01001D_020", asian_female_15_to_17 = "B01001D_021"), 
  state = "MD",
  year = 2019
) %>%
  select(NAME, variable, estimate)

asian_kids_clean <- asian_kids %>%
  group_by(NAME) %>%
  summarise(
    total_kids = sum(estimate)
  )

asian_kids_clean %>%
  summarise(
    total_kids_state = sum(total_kids)
  )

native_hawaiian_kids <- get_acs(
  geography = "county",
  variables = c(native_hawiian_male_under_5 = "B01001E_003", native_hawiian_male_5_to_9 = "B01001E_004", native_hawiian_male_10_to_14 = "B01001E_005", native_hawiian_male_14_to_17 = "B01001E_006",
native_hawiian_female_under_5 = "B01001E_018", native_hawiian_female_5_to_9 = "B01001E_019", native_hawiian_female_10_to_14 = "B01001E_020", native_hawiian_female_15_to_17 = "B01001E_021"), 
  state = "MD",
  year = 2019
) %>%
  select(NAME, variable, estimate) 


native_hawaiian_kids_clean <- native_hawaiian_kids %>%
  group_by(NAME) %>%
  summarise(
    total_kids = sum(estimate)
  )

native_hawaiian_kids_clean %>%
  summarise(
    total_kids_state = sum(total_kids)
  )

# Total kids in the whole state: 

# Totals:

# native_hawaiian_kids: 691

# pacific_kids: 

# hispanic_kids: 205266

# native_alaskan_kids: 3241

# white_kids: 656618

# black_kids: 416120

# asian_kdis: 75827

```

```{r}

# Finding Asian renters

asian_renters <- everything_combined %>%
  summarise(
    md_renters_asian_state = sum(renter_asian_population),
    md_asian_pop = sum(asian_population)) %>%
  mutate(percent_asian_renters = (md_renters_asian_state/md_asian_pop)*100) %>%

# Finding Asian home owners

asian_owners <- everything_combined %>%
  summarise(
    md_owners_asian_state = sum(owner_asian_population),
    md_asian_pop = sum(asian_population)) %>%
  mutate(percent_asian_owners = (md_owners_asian_state/md_asian_pop)*100)

# Finding Native renters

native_renters <- everything_combined %>%
  summarise(
    md_renters_native_state = sum(renter_native_population),
    md_native_pop = sum(native_population)) %>%
  mutate(percent_native_renters = (md_renters_native_state/md_native_pop)*100)

# Finding Native homeowners

native_owners <- everything_combined %>%
  summarise(
    md_owners_native_state = sum(owner_native_population),
    md_native_pop = sum(native_population)) %>%
  mutate(percent_native_owners = (md_owners_native_state/md_native_pop)*100)

# Finding Pacific Island renters

pacific_renters <- everything_combined %>%
  summarise(
    md_renters_pacific_state = sum(renter_pacific_island_population),
    md_pacific_pop = sum(pacific_island_population)) %>%
  mutate(percent_pacific_renters = (md_renters_pacific_state/md_pacific_pop)*100)

# Finding Pacific Island homeowners 

pacific_owners <- everything_combined %>%
  summarise(
    md_owner_pacific_state = sum(owner_pacific_island_population),
    md_pacific_pop = sum(pacific_island_population)) %>%
  mutate(percent_pacific_renters = (md_owner_pacific_state/md_pacific_pop)*100)

# Finding Hispanic renters

everything_combined %>%
  summarise(
    md_renters_hispanic_state = sum(renter_hispanicorlatino_data),
    md_white_pop = sum(white_population)) %>%
  mutate(percent_hispanic_renters = (md_renters_hispanic_state/md_white_pop)*100)

# Finding Hispanic homeowners

everything_combined %>%
  summarise(
    md_owners_hispanic_state = sum(hispanicorlatino_data_homeownership),
    md_white_pop = sum(white_population)) %>%
  mutate(percent_hispanic_owners = (md_owners_hispanic_state/md_white_pop)*100)


# Showing like this because we have made joining these dataframes too difficult because they don't contain a name column, but we can fix in future if needed. 

# Black renters = 17.48%
# Black owners = 18.55%

# White r = 9.56%
# White o = 29.88%

# Asian r = 9.66%
# Asian o = 22.54%

# Native r = 17.65%
# Native o = 22.38%

# Pacific r = 13.18%
# Pacific o =  18.49%

# Hispanic r = 2.19%
# Hispanic o = 2.19%


```


# TUESDAY: ANDRES ZOOM COMMENT: Ok so on Tuesday, our final exploration will be to find the more accurate population by demographic data to see what the true ownership/rentership breakdown is. We’ll do this by taking the “SEX BY AGE” ACS variables for males under 18, combined with the same thing for females under 18. Then we’ll combine that data and we will subtract those numbers from the total populations by demographic, which will allow us to run the percentage calculations to find the true numbers. To get us started, SEX BY AGE (WHITE ALONE) is “B01001A_025.

# We acknowledge the discrepancies in the total ownership and rentership numbers, and will be exploring this further by comparing those stats to a different ACS variable of total population of people in each demographic category over the age of 18, to see how the numbers change. This would make sense that the numbers may be different because people under 18 cannot own or rent homes. The ACS variable we select will reflect populations 18 years and older.

Update to question 5 based on filtering out of children data:









* QUESTION 6 *


Derek comment: This is good stuff and getting better. I would love to see Prince George's compared to another county in Maryland that is at least somewhat similar, either demographically or in terms of growth. You also could compare it to Maryland as a whole. This would offer some context for what you are finding at a broad level.

# 6. How does the racial demographic breakdown of housing in Prince George's County compare to the breakdown of the rest of the state? Do any demographic groups stand out for being particularly different than the breakdowns of the state as a whole? Why do we think there is a discrepancy?

Something to consider is the breakdown between white and Black populations in Maryland, and then in PG County. The PG County Black population dwarfs the MD population —the white population is about a quarter of the Black population in PG county. In Maryland as a whole, white people make up 58.5% and Black people make up 31.1%. But the data reveals a disparity between Black and white homeowners in PG County, relative to their population, as 27.6% of white people own homes compared to 22.5% of Black people. Although these stats seem similar, the Black population in Prince George's County is so much higher than the white population that one would expect the Black population to have a greater share of home ownership rates. There are also more Black renters in Prince George's County than white renters. 

We also found it surprising that there was so much discrepancy between the statewide proportion of Black owners to Black renters compared to the same data in Prince George's County, which is a majority Black jurisdiction in the state. 

One demographic group that stands out to us for its renting rates in Prince George's County compared to the rest of the state is pacific islander communities. They by far have the highest rate of renting in Prince George's County at 34.95%, with the next highest rentership rate being the Black population in Prince George's County, which is about 23%. This high number makes sense because the pacific islander population in Prince George's County, according to this data, is only 475, which would likely skew the percentages to make this group seem like it takes up much more of the renting in the county than one would expect. 


```{r}


view(prince_georges_race_and_housing) 

pg_owner_by_race <- final_owner_race_demographics %>%
  filter(NAME == "Prince George's County, Maryland")

pg_renter_by_race <- final_renter_race_demographics %>%
  filter(NAME == "Prince George's County, Maryland")

pg_combined_housing <- pg_owner_by_race %>% inner_join(pg_renter_by_race, by=c("GEOID", "NAME"))

pg_combined_race_housing <- pg_combined_housing %>% inner_join(prince_georges_race_and_housing, by=c("GEOID", "NAME"))

pg_selected_columns <- pg_combined_race_housing[1, 1:27]
  
  
# Finding PG Black renters

pg_black_renters <- pg_selected_columns %>%
  summarise(
    pg_renters_black_state = sum(renter_black_population),
    pg_black_pop = sum(black_population)) %>%
  mutate(percent_black_renters = (pg_renters_black_state/pg_black_pop)*100)

# Finding PG Black home owners

pg_black_owners <- pg_selected_columns %>%
  summarise(
    pg_owners_black_state = sum(owner_black_population),
    pg_black_pop = sum(black_population)) %>%
  mutate(percent_black_owners = (pg_owners_black_state/pg_black_pop)*100)

# Finding PG white renters

pg_white_renters <- pg_selected_columns %>%
  summarise(
    pg_renters_white_state = sum(renter_white_population),
    pg_white_pop = sum(white_population)) %>%
  mutate(percent_white_renters = (pg_renters_white_state/pg_white_pop)*100)

# Finding PG white homeowners

pg_white_owners <- pg_selected_columns %>%
  summarise(
    pg_owners_white_state = sum(owner_white_population),
    pg_white_pop = sum(white_population)) %>%
  mutate(percent_white_owners = (pg_owners_white_state/pg_white_pop)*100)


# Finding PG Asian renters

pg_asian_renters <- pg_selected_columns %>%
  summarise(
    pg_renters_asian_state = sum(renter_asian_population),
    pg_asian_pop = sum(asian_population)) %>%
  mutate(percent_asian_renters = (pg_renters_asian_state/pg_asian_pop)*100)

# Finding PG Asian home owners

pg_asian_owners <- pg_selected_columns %>%
  summarise(
    pg_owners_asian_state = sum(owner_asian_population),
    pg_asian_pop = sum(asian_population)) %>%
  mutate(percent_asian_owners = (pg_owners_asian_state/pg_asian_pop)*100)

# Finding PG Native renters

pg_native_renters <- pg_selected_columns %>%
  summarise(
    pg_renters_native_state = sum(renter_native_population),
    pg_native_pop = sum(native_population)) %>%
  mutate(percent_native_renters = (pg_renters_native_state/pg_native_pop)*100)

# Finding PG Native homeowners

pg_native_owners <- pg_selected_columns %>%
  summarise(
    pg_owners_native_state = sum(owner_native_population),
    pg_native_pop = sum(native_population)) %>%
  mutate(percent_native_owners = (pg_owners_native_state/pg_native_pop)*100)

# Finding PG Pacific Island renters

pg_pacific_renters <- pg_selected_columns %>%
  summarise(
    pg_renters_pacific_state = sum(renter_pacific_island_population),
    pg_pacific_pop = sum(pacific_island_population)) %>%
  mutate(percent_pacific_renters = (pg_renters_pacific_state/pg_pacific_pop)*100)

# Finding PG Pacific Island homeowners 

pg_pacific_owners <- pg_selected_columns %>%
  summarise(
    md_owner_pacific_state = sum(owner_pacific_island_population),
    md_pacific_pop = sum(pacific_island_population)) %>%
  mutate(percent_pacific_renters = (md_owner_pacific_state/md_pacific_pop)*100)

# Finding PG Hispanic renters

pg_hispanic_renters <- pg_selected_columns %>%
  summarise(
    pg_renters_hispanic_state = sum(renter_hispanicorlatino_data),
    pg_white_pop = sum(white_population)) %>%
  mutate(percent_hispanic_renters = (pg_renters_hispanic_state/pg_white_pop)*100)

# Finding PG Hispanic homeowners

pg_hispanic_owners <- pg_selected_columns %>%
  summarise(
    pg_owners_hispanic_state = sum(hispanicorlatino_data_homeownership),
    pg_white_pop = sum(white_population)) %>%
  mutate(percent_hispanic_owners = (pg_owners_hispanic_state/pg_white_pop)*100)


# ORIGINAL CALCULATIONS W/O CALCULATING FOR 18 and YOUNGER

# MD

# Black renters = 17.48% 
# Black owners = 18.55% 

# White r = 9.56% 
# White o=29.88% 

# Asian r = 9.66%
# Asian o = 22.54%

# Native r = 17.65%
# Native o = 22.38%

# Pacific r = 13.18%
# Pacific o =  18.49%

# Hispanic r = 2.19%
# Hispanic o = 2.19%



# PG

# Black renters = 14.26%
# Black owners = 22.5

# White r = 9.67
# White o= 27.56

# Asian r = 10.15
# Asian o = 20.25

# Native r =  19.43
# Native o =  20.01

# Pacific r =   34.95
# Pacific o =   17.47

# Hispanic r =  12.61
# Hispanic o =  11.61

```



