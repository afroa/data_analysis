# Put code to reverse engineer sentence here
payouts_2017 <- all_payouts_decade %>%
filter(fiscal_year == 2017)
# Write the code to create a dataframe of payouts from 2006-2016
payouts_2006_2016 <- all_payouts_decade %>%
filter(fiscal_year < 2017)
# Sum the total number of payouts from 2006-2016 (satisfies "five times as many as a decade before")
payouts_2006_2016 %>%
summarise(
count=n())
# Determine the percent change in payouts through the whole 10-year period (satisfies "while the total number of payouts has dipped over time")
yearly_payout_count <- all_payouts_decade %>%
group_by(fiscal_year) %>%
summarise(count=n()) %>%
arrange(fiscal_year)
yearly_payout_count %>%
summarise(
total_payouts_10_years = sum(count)
)
yearly_payout_count %>%
summarise(
percent_change = ((1369-1468)/18703)*100
)
# Find the average amount of payouts from the decade 2006-2016 (satisfies "the average amount has increased")
payouts_2006_2016 %>%
summarise(
total_mean_pay_amount = mean(amount)
)
payouts_2006_2016 %>%
filter(fiscal_year == "2006") %>%
summarise(
mean_pay_amount_2006 = mean(amount)
)
payouts_2006_2016 %>%
filter(fiscal_year == "2016") %>%
summarise(
mean_pay_amount_2016 = mean(amount)
)
yearly_payout_count %>%
summarise(
percent_change = ((94230.15-25345.32)/37567.26)*100)
all_payouts_decade %>%
group_by(case_type) %>%
summarise(count = n())
all_payouts_decade %>%
group_by(case_type) %>%
summarise(count = n()) %>%
arrange(desc(count))
# Put code to reverse engineer sentence here
police_department_payouts_2016 <- all_payouts_decade %>%
filter(department_clean == "Police Department" & fiscal_year == 2016 & amount > 7000000)
police_department_payouts_2016 %>%
filter(claim_case_number != "BC453870") %>%
summarize(total = sum(amount))
police_department_payouts_2016 %>%
group_by(case_type) %>%
summarise(count = n()) %>%
arrange(desc(count))
# Display results of code below this codeblock
police_department_payouts_2016 %>%
group_by(case_type) %>%
summarise(count = n()) %>%
arrange(desc(count))
police_payouts <- all_payouts_decade %>%
filter(department_clean == "Police Department")
group_by(case_type) %>%
summarise(count = n()) %>%
arrange(desc(count))
View(all_payouts_decade)
police_payouts <- all_payouts_decade %>%
group_by(case_type) %>%
filter(department_clean == "Police Department") %>%
summarise(count = n()) %>%
arrange(desc(count))
View(police_payouts)
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(tidycensus)
library(tidyverse)
library(tidycensus)
barber_shops <- read_csv("data/barber_shops_ppp.csv")
View(barber_shops)
barber_state_apps <- barber_shops  %>%
group_by(state) %>%
summarize(count(n))
barber_state_apps <- barber_shops  %>%
group_by(state) %>%
summarise(
count=n())
View(barber_state_apps)
barber_state_apps <- barber_shops  %>%
group_by(state) %>%
summarise(
count=n()) %>%
arrange(desc(count))
View(barber_state_apps)
barber_state_apps <- barber_shops  %>%
group_by(state) %>%
summarise(
count=n()) %>%
filter(count > 18) %>%
arrange(desc(count))
View(barber_state_apps)
View(barber_shops)
barber_undispersed <- barber_shops %>%
filter(undispersed_amount > 0) %>%
group_by(state) %>%
summarize(count=n()) %>%
arrange(desc(count))
barber_undispersed <- barber_shops %>%
filter(undisbursed_amount > 0) %>%
group_by(state) %>%
summarize(count=n()) %>%
arrange(desc(count))
View(barber_undispersed)
barber_undispersed <- barber_shops %>%
filter(undisbursed_amount > 0) %>%
group_by(state) %>%
summarize(number_undisbursed=n()) %>%
arrange(desc(count))
barber_undispersed <- barber_shops %>%
filter(undisbursed_amount > 0) %>%
group_by(state) %>%
summarize(count=n()) %>%
arrange(desc(count))
all_barber_stats <- barber_state_apps %>%
left_join(barber_undispersed, by=c('count'))
View(all_barber_stats)
all_barber_stats <- barber_state_apps %>%
left_join(barber_undispersed, by=c('state'))
View(all_barber_stats)
all_barber_stats <- barber_state_apps %>%
left_join(barber_undispersed, by=c('state')) %>%
rename(all_barber_stats, total_loans = count.x)
library(dplyr)
all_barber_stats <- barber_state_apps %>%
left_join(barber_undispersed, by=c('state')) %>%
rename(all_barber_stats, total_loans = count.x)
all_barber_stats <- barber_state_apps %>%
left_join(barber_undispersed, by=c('state')) %>%
rename(total_loans=count.x, total_undisbursed=count.y)
View(all_barber_stats)
top_10_barbers <- all_barber_stats %>%
arrange(desc(total_loans))
View(top_10_barbers)
top_10_barbers <- all_barber_stats %>%
arrange(desc(total_loans)) %>%
head(10)
View(top_10_barbers)
write_csv(top_10_barbers)
write_csv(top_10_barbers, "data/top_10_barbers.csv")
barber_loans_all_states <- all_barber_stats %>%
arrange(desc(total_loans))
View(barber_loans_all_states)
View(all_barber_stats)
barber_state_apps <- barber_shops  %>%
group_by(state) %>%
summarise(
count=n()) %>%
arrange(desc(count))
barber_undispersed <- barber_shops %>%
filter(undisbursed_amount > 0) %>%
group_by(state) %>%
summarize(count=n()) %>%
arrange(desc(count))
all_barber_stats <- barber_state_apps %>%
left_join(barber_undispersed, by=c('state')) %>%
rename(total_loans=count.x, total_undisbursed=count.y)
top_10_barbers <- all_barber_stats %>%
arrange(desc(total_loans)) %>%
head(10)
barber_state_apps <- barber_shops  %>%
group_by(state) %>%
summarise(
count=n()) %>%
filter(count > 18) %>%
arrange(desc(count))
barber_undispersed <- barber_shops %>%
filter(undisbursed_amount > 0) %>%
group_by(state) %>%
summarize(count=n()) %>%
arrange(desc(count))
all_barber_stats <- barber_state_apps %>%
left_join(barber_undispersed, by=c('state')) %>%
rename(total_loans=count.x, total_undisbursed=count.y)
top_10_barbers <- all_barber_stats %>%
arrange(desc(total_loans)) %>%
head(10)
barber_loans_all_states <- all_barber_stats %>%
arrange(desc(total_loans)) %>%
mutate(
percent = (total_undisbursed/total_loans)*100
)
View(barber_loans_all_states)
barber_loans_all_states <- all_barber_stats %>%
arrange(desc(total_loans)) %>%
mutate(
percent = (total_undisbursed/total_loans)*100
)
write_csv(barber_loans_all_states, "data/barber_loans_all_states.csv")
barber_all_states_percent <- all_barber_stats %>%
arrange(desc(total_loans)) %>%
mutate(
percent = (total_undisbursed/total_loans)*100
)
write_csv(barber_all_state_percent, "data/barber_all_state_percent.csv")
barber_all_states_percent <- all_barber_stats %>%
arrange(desc(total_loans)) %>%
mutate(
percent = (total_undisbursed/total_loans)*100
)
write_csv(barber_all_states_percent, "data/barber_all_state_percent.csv")
barber_all_states_percent <- all_barber_stats %>%
arrange(desc(total_loans)) %>%
mutate(
percent = (total_undisbursed/total_loans)*100
) %>%
arrange(desc(percent))
write_csv(barber_all_states_percent, "data/barber_all_state_percent.csv")
barber_all_states_percent <- all_barber_stats %>%
arrange(desc(total_loans)) %>%
mutate(
percent = (total_undisbursed/total_loans)*100
) %>%
arrange(desc(percent)) %>%
head(15)
barber_states_percent <- all_barber_stats %>%
arrange(desc(total_loans)) %>%
mutate(
percent = (total_undisbursed/total_loans)*100
) %>%
arrange(desc(percent)) %>%
head(15)
write_csv(barber_states_percent, "data/barber_all_state_percent.csv")
barber_states_percent <- all_barber_stats %>%
mutate(
percent = (total_undisbursed/total_loans)*100
) %>%
arrange(desc(percent)) %>%
select(total_loans, percent)
head(15)
write_csv(barber_states_percent, "data/barber_all_state_percent.csv")
barber_states_percent <- all_barber_stats %>%
mutate(
percent = (total_undisbursed/total_loans)*100
) %>%
arrange(desc(percent)) %>%
select(total_loans, percent, state)
head(15)
write_csv(barber_states_percent, "data/barber_all_state_percent.csv")
barber_states_percent <- all_barber_stats %>%
mutate(
percent = (total_undisbursed/total_loans)*100
) %>%
arrange(desc(percent)) %>%
select(state, total_loans, percent)
head(15)
write_csv(barber_states_percent, "data/final_barber.csv")
barber_states_percent <- all_barber_stats %>%
mutate(
percent = (total_undisbursed/total_loans)*100
) %>%
arrange(desc(percent)) %>%
select(state, total_loans, percent)
head(15)
barber_states_percent <- all_barber_stats %>%
mutate(
percent = (total_undisbursed/total_loans)*100
) %>%
arrange(desc(percent)) %>%
select(state, total_loans, percent) %>%
head(15)
write_csv(barber_states_percent, "data/final_barber.csv")
barber_states_percent <- all_barber_stats %>%
mutate(
percent = (total_undisbursed/total_loans)*100
) %>%
arrange(desc(percent)) %>%
select(state, total_loans, percent)
View(barber_states_percent)
barber_states_percent <- all_barber_stats %>%
mutate(
percent = (total_undisbursed/total_loans)*100
) %>%
arrange(desc(percent)) %>%
select(state, total_loans, percent) %>%
head(30)
write_csv(barber_states_percent, "data/final_barber.csv")
kabbage_counties <- read_csv("data/kabbage_counties.csv")
all_counties <- read.csv("data/all_counties.csv")
View(all_counties)
View(kabbage_counties)
joined_kabbage <- kabbage_counties %>%
left_join(all_counties, by=c('project_county_name'))
View(joined_kabbage)
joined_kabbage <- kabbage_counties %>%
left_join(all_counties, by=c('project_county_name', 'project_state'))
View(joined_kabbage)
joined_kabbage <- kabbage_counties %>%
left_join(all_counties, by=c('project_county_name', 'project_state')) %>%
rename(total_kabbage_loans=count.x, total_county_loans=count.y)
joined_kabbage <- kabbage_counties %>%
left_join(all_counties, by=c('project_county_name', 'project_state')) %>%
rename(total_kabbage_loans=total.x, total_county_loans=total.y)
View(joined_kabbage)
joined_kabbage <- kabbage_counties %>%
left_join(all_counties, by=c('project_county_name', 'project_state')) %>%
rename(total_kabbage_loans=total.x, total_county_loans=total.y) %>%
mutate(
percent = (total_kabbage_loans/total_county_loans)*100
) %>%
arrange(desc(percent))
View(joined_kabbage)
county_fips <- read.csv("data/county_fips.csv")
View(county_fips)
fips_join <- joined_kabbage %>%
left_join(county_fips, by=c('match_county' = 'project_county_name'))
fips_join <- joined_kabbage %>%
left_join(county_fips, by=c('project_county_name' = 'match_county'))
View(fips_join)
fips_join <- joined_kabbage %>%
left_join(county_fips, by=c('project_county_name' = 'match_county'))
View(fips_join)
fips_join <- joined_kabbage %>%
left_join(county_fips, by=c('project_county_name' = 'match_county', 'state' = 'project_county_state'))
fips_join <- joined_kabbage %>%
left_join(county_fips, by=c('project_county_name' = 'match_county', 'project_county_state' = 'state'))
fips_join <- joined_kabbage %>%
left_join(county_fips, by=c('project_county_name' = 'match_county' & 'project_county_state' = 'state'))
fips_join <- joined_kabbage %>%
left_join(county_fips, by=c('project_county_name' = 'match_county', 'project_county_state' = 'state'))
knitr::opts_chunk$set(echo = TRUE)
md_counties_with_fips <- md_counties %>%
left_join(md_fips, by=c('project_county_name'='match_county'))
fips_join <- joined_kabbage %>%
left_join(county_fips, by=c('project_county_name' = 'match_county'))
fips_join <- joined_kabbage %>%
left_join(county_fips, by=c('project_county_name' = 'match_county'))
write_csv(fips_join, "data/counties_with_fips")
fips_join <- joined_kabbage %>%
left_join(county_fips, by=c('project_county_name' = 'match_county'))
write_csv(fips_join, "data/counties_with_fips.csv")
View(fips_join)
knitr::opts_chunk$set(echo = TRUE)
setwd("~/Documents/GitHub/data_analysis")
md_median_household_income <- read.csv("data/md_median_household_income.csv")
View(md_median_household_income)
library(tidycensus)
library(tidyverse)
library(janitor)
library(tidycensus)
library(tidyverse)
library(janitor)
#Reading the data into a new dataframe
md_median_household_income <- read.csv("data/md_median_household_income.csv")
# Cleaning the data
md_median_household_income %>%
mutate(COUNTY = toupper(str_remove_all(COUNTY,", West Virginia|County"))) %>%
mutate(COUNTY = str_trim(COUNTY,side="both"))
md_median_household_income %>%
filter(Data = "Income")
md_median_household_income %>%
filter(Data == "Income")
cleaned_md_median_household_income <- md_median_household_income %>%
filter(Data == "Income") %>%
subset(mydata, select = -Date.created(x,z))
cleaned_md_median_household_income <- md_median_household_income %>%
filter(Data == "Income") %>%
subset(md_median_household_income, select = -Date.created(x,z))
cleaned_md_median_household_income <- md_median_household_income %>%
filter(Data == "Income") %>%
subset(md_median_household_income, select = -Date.created)
cleaned_md_median_household_income <- md_median_household_income %>%
filter(Data == "Income")
View(cleaned_md_median_household_income)
cleaned_md_median_household_income <- md_median_household_income %>%
filter(Data == "Income") %>%
clean_names()
View(cleaned_md_median_household_income)
cleaned_md_median_household_income <- md_median_household_income %>%
filter(Data == "Income") %>%
clean_names() %>%
mutate(COUNTY = toupper(str_remove_all(COUNTY,"_ County")))
cleaned_md_median_household_income <- md_median_household_income %>%
filter(Data == "Income") %>%
clean_names() %>%
t()
View(cleaned_md_median_household_income)
clean_columns <- cleaned_md_median_household_income %>% col_names =c("2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "Total")
library(janitor)
clean_columns <- cleaned_md_median_household_income %>% col_names =c("2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "Total")
cleaned_md_median_household_income <- md_median_household_income %>%
filter(Data == "Income") %>%
clean_names() %>%
t()
View(cleaned_md_median_household_income)
write_csv(cleaned_medians, "data/clean_medians.csv") <- md_median_household_income %>%
filter(Data == "Income") %>%
clean_names() %>%
t()
write_csv(md_median_household_income, "data/clean_medians.csv") <- md_median_household_income %>%
filter(Data == "Income") %>%
clean_names() %>%
t()
md_median_household_income %>%
filter(Data == "Income") %>%
clean_names() %>%
t()
write_csv(md_median_household_income, "data/clean_medians.csv") <- md_median_household_income
write_csv(md_median_household_income, "data/clean_medians.csv")
read_csv("data/clean_medians.csv", col_names =c("2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019"))
clean_columns <- read_csv("data/clean_medians.csv", col_names =c("2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019"))
View(clean_columns)
clean_columns <- read_csv("data/clean_medians.csv", skip=1, col_names =c("2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019"))
View(clean_columns)
clean_columns <- read_csv("data/clean_medians.csv", col_names =c("2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019"))
View(clean_columns)
clean_columns <- read_csv("data/clean_medians.csv")
View(clean_columns)
md_median_household_income %>%
filter(Data == "Income") %>%
clean_names() %>%
t()
View(cleaned_md_median_household_income)
clean_rows <- md_median_household_income %>%
filter(Data == "Income") %>%
clean_names() %>%
t()
write_csv(clean_rows, "data/clean_medians.csv")
write_csv(clean_rows, "data/clean_medians.csv")
md_median_household_income <- read.csv("data/md_median_household_income.csv")
View(md_median_household_income)
View(clean_rows)
write_csv(clean_rows, "data/clean_medians.csv")
clean_rows <- md_median_household_income %>%
filter(Data == "Income") %>%
clean_names() %>%
t()
write_csv(clean_rows, "data/clean_rows.csv")
clean_rows <- md_median_household_income %>%
filter(Data == "Income") %>%
clean_names() %>%
t()
View(clean_rows)
View(clean_columns)
write_csv(clean_rows, "data/clean_rows.csv")
clean_rows <- md_median_household_income %>%
filter(Data == "Income") %>%
clean_names() %>%
t(HEC)
clean_rows <- md_median_household_income %>%
filter(Data == "Income") %>%
clean_names() %>%
t(md_median_household_income)
clean_rows <- md_median_household_income %>%
filter(Data == "Income") %>%
clean_names() %>%
t()
clean_rows <- md_median_household_income %>%
filter(Data == "Income") %>%
clean_names() %>%
t() %>%
print(clean_rows)
clean_rows <- md_median_household_income %>%
filter(Data == "Income") %>%
clean_names() %>%
t()
as.data.frame(clean_rows)
df <- as.data.frame(clean_rows)
View(df)
df_clean <- as.data.frame(clean_rows)
write_csv(df, "data/clean_rows.csv")
flipped_rows <- as.data.frame(clean_rows)
flipped_rows %>%
col_names =c("2010", "2011", "2012", "2013", "2013", "2014", "2015", "2016", "2017", "2018", "2019")
write_csv(df, "data/clean_rows.csv")
finally <- read_csv("data/clean_rows.csv", col_names =c("2010", "2011", "2012", "2013", "2013", "2014", "2015", "2016", "2017", "2018", "2019"))
View(finally)
flipped_rows <- as.data.frame(clean_rows)
View(flipped_rows)
flipped_rows <- as.data.frame(clean_rows)
write_csv(flipped_rows, "data/clean_rows.csv")
finally <- read_csv("data/clean_rows.csv", col_names =c("2010", "2011", "2012", "2013", "2013", "2014", "2015", "2016", "2017", "2018", "2019"))
View(finally)
finally <- read_csv("data/clean_rows.csv")
View(finally)
flipped_rows <- as.data.frame(clean_rows)
write_csv(flipped_rows, "data/flipped_rows.csv")
finally <- read_csv("data/flipped_rows.csv")
View(finally)
View(flipped_rows)
export <- flipped_rows
write_csv(export, "data/export.csv")
read_csv("data/export.csv")
View(export)
final_open_refine <- flipped_rows
write_csv(final_open_refine, "data/final_open_refine.csv")
flipped_rows <- as.data.frame(clean_rows)
View(flipped_rows)
flipped_rows %>%
rename(flipped_rows, V1 = 2010)
flipped_rows %>%
rename(flipped_rows, V1 = "2010")
library(dplyr)
flipped_rows %>%
rename(flipped_rows, V1 = "2010")
cleaned_data <- read_csv("data/clean_median_income_md.csv")
View(cleaned_data)
cleaned_data <- read_csv("data/please_god.csv")
View(cleaned_data)
cleaned_data <- read_csv("data/final_final.csv")
View(cleaned_data)
